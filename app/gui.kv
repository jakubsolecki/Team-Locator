#:include teammapview.kv

<WindowManager>:
    TokenWindow:
    HostWindow:
    MapWindow:
        id:mw


<HostWindow>:
    switch: switch
    slider: slider
    tv: tv
    name: "host"

    GridLayout:
        cols: 1

        Label:
            text: "Tworzenie gry"
        GridLayout:
            cols: 2
            Label:
                text: "Host widoczny:"
            Switch:
                id: switch

        Slider:
            id: slider
            min: 0
            max: 10
            step: 1
            on_touch_move: root.createNodes()

        TreeView:
            id: tv
            size: root.width, root.height * 0.6
            size_hint: None, None


        Button:
            text: "Connect"
            on_release: root.sendToServer()

        Button:
            text: "Go back"
            on_release: app.root.current = "menu"




<MapWindow>:
    name: "viewer"
    GridLayout:
        cols: 1

        TeamMapView:
            id: map

        Button:
            text: "Show full team"
            on_release: map.show_full_team()
            size: root.width, root.height * 0.1
            size_hint: None, None
        Button:
            text: "Leave"
            on_release: app.root.current = "menu"
            size: root.width, root.height * 0.1
            size_hint: None, None
    #BtnPopup:




<TokenWindow>:
    name: "menu"

    GridLayout:
        cols: 1

        TextInput:
            id: nickname
            multiline: False

        TextInput:
            id: password
            multiline: False

        GridLayout:
            cols: 2
            Button:
                text: "Connect Game"
                on_release: app.root.current = "viewer"
            Button:
                text: "Host Game"
                on_release: app.root.current = "host"




<BtnPopup>:
    Button:
        size: root.width * 0.2, root.height * 0.05
        top: self.height and root.y + root.height
        text: "CODES"
        on_release: root.click()
    Button:
        size: root.width * 0.2, root.height * 0.05
        right: self.width and root.x + root.width
        top: self.height and root.y + root.height
        text: "STOP"
        on_release: root.click() #TOCHANGE


<Pop>:
    Label:
        text: root.text
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2, "top":1}
